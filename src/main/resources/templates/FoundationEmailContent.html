<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.thymeleaf.org ">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
</head>
<body>
<table border="1">
    <th>日期</th>
    <th>代码</th>
    <th>名称</th>
    <th>估值</th>
    <th>估值涨幅</th>
    <th>当日净值</th>
    <th>当日涨幅</th>
    <th>累计净值</th>
    <th>周内涨幅</th>
    <th>月内涨幅</th>
    <th>三月内涨幅</th>
    <th>六月内涨幅</th>
    <th>周内同类排名</th>
    <th>月内同类排名</th>
    <th>三月内同类排名</th>
    <th>六月内同类排名</th>
    <tbody>
    <tr th:each="foundation : ${list}"
        th:style="'color:' + @{(${foundation.shouldWarn} ? 'red' : '')} + ''">
        <td th:text="${foundation.date}"> 日期</td>
        <td><a th:href="@{'http://fund.eastmoney.com/'+${foundation.code}+'.html'}" target="_blank"
               th:text="${foundation.code}"></a></td>
        <td th:text="${foundation.name}"> 名称</td>
        <td th:text="${foundation.estimatedValue}"> 估值</td>
        <td th:text="${foundation.estimatedGain}"> 估值涨幅</td>
        <td th:text="${foundation.actualValue}"> 净值</td>
        <td th:text="${foundation.actualGain}"> 涨幅</td>
        <td th:text="${foundation.accumulativeValue}"> 累计净值</td>
        <td th:text="${foundation.gainWithinWeek}"> 周内涨幅</td>
        <td th:text="${foundation.gainWithinMonth}"> 月内涨幅</td>
        <td th:text="${foundation.gainWithinThreeMonth}"> 三月内涨幅</td>
        <td th:text="${foundation.gainWithinSixMonth}"> 六月内涨幅</td>
        <td th:text="${foundation.rankWithinWeek}"> 周内同类排名</td>
        <td th:text="${foundation.rankWithinMonth}"> 月内同类排名</td>
        <td th:text="${foundation.rankWithinThreeMonth}"> 三月内同类排名</td>
        <td th:text="${foundation.rankWithinSixMonth}"> 六月内同类排名</td>
    </tr>
    </tbody>
</table>
<div id="charts"></div>
<script crossorigin="anonymous" integrity="sha384-mlceH9HlqLp7GMKHrj5Ara1+LvdTZVMx4S1U43/NxCvAkzIo8WJ0FE7duLel3wVo" src="https://lib.baomitu.com/jquery/3.4.1/jquery.js"></script>
<script crossorigin="anonymous" integrity="sha384-dvRcIlIMcjGZ3zWdA8tp/2oMLeiAKMOSLt3kZZymNo5KRK80qLQo2F+YujiP25+9" src="https://lib.baomitu.com/echarts/4.6.0/echarts.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $.ajax({
            type : "GET",
            contentType: "application/json;charset=UTF-8",
            url : "http://localhost:8081/investment/all",
            success : function(result) {
                $('#charts').empty()
                var data = JSON.parse(result)
                console.log(data)
                data.forEach(item => {
                    let id = 'charts_'+ item.code
                    console.log(item)
                    $('#charts').append('<div style="height:400px; width:400px;float:left;" id="'+ id + '"></div>')
                    var chart = document.getElementById(id);
                    var echart = echarts.init(chart);
                    var option = {
                        title: {
                            text: item.name
                        },
                        xAxis : {
                            data: item.xAxis
                        },
                        yAxis : {},
                        series: [{
                            name: 'value',
                            type: 'line',
                            data: item.yAxis
                        }]
                    };
                    echart.setOption(option);
                })
            },
            error : function(e){
                console.log(e.status);
                console.log(e.responseText);
            }
        });
    });
</script>
</body>
</html>